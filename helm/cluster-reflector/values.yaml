# Default values for cluster-reflector.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Container image configuration
image:
  # -- Container image repository
  repository: ghcr.io/yourorg/cluster-reflector
  # -- Container image tag
  tag: "0.1.0"
  # -- Container image pull policy
  pullPolicy: IfNotPresent

# -- Image pull secrets for private registries
imagePullSecrets: []

# -- Override the name of the chart
nameOverride: ""
# -- Override the full name of the chart
fullnameOverride: ""

# -- Number of replicas
replicaCount: 1

# -- ServiceAccount configuration
serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# -- RBAC configuration
rbac:
  # -- Specifies whether RBAC resources should be created
  create: true

# -- Pod annotations
podAnnotations: {}

# -- Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 10001
  fsGroup: 10001

# -- Container security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
    - ALL

# -- Service configuration
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 80
  # -- Target port on the container
  targetPort: 8080
  # -- Service annotations
  annotations: {}

# -- Ingress configuration
ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Ingress annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress hosts configuration
  hosts:
    - host: reflector.example.com
      paths:
        - path: /
          pathType: Prefix
  # -- Ingress TLS configuration
  tls: []
  #  - secretName: reflector-tls
  #    hosts:
  #      - reflector.example.com

# -- Resource limits and requests
resources:
  # -- Resource limits
  limits:
    cpu: 200m
    memory: 256Mi
  # -- Resource requests
  requests:
    cpu: 50m
    memory: 64Mi

# -- Liveness probe configuration
livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# -- Readiness probe configuration
readinessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# -- Node selector for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

# -- Affinity for pod assignment
affinity: {}

# -- Topology spread constraints
topologySpreadConstraints: []

# -- Common labels applied to all resources
commonLabels: {}

# -- Common annotations applied to all resources
commonAnnotations: {}

# -- Cache configuration
cache:
  # -- Cache TTL duration
  ttl: 10s

# -- Log level (debug, info, warn, error)
logLevel: info

# -- App discovery configuration
appDiscovery:
  # -- Enable app discovery
  enabled: true
  # -- Prefer custom CRD over workload discovery
  preferCRD: true
  # -- Enable fallback to workload discovery
  fallbackWorkloads: true
  # -- CRD-only mode: only discover from AppVersion CRDs, ignore workloads
  crdOnly: false
  # -- Namespace selector for discovery (empty = all namespaces)
  # Can be a label selector string or comma-separated namespace names
  namespaceSelector: ""
  # -- Workload kinds to discover
  workloadKinds:
    - Deployment
    - StatefulSet

# -- CRD configuration
crds:
  # -- Install CRDs (should generally be true)
  install: true

# -- Pod Disruption Budget configuration
pdb:
  # -- Enable Pod Disruption Budget
  enabled: true
  # -- Minimum number of available replicas
  minAvailable: 1
  # -- Maximum number of unavailable replicas (alternative to minAvailable)
  # maxUnavailable: 1

# -- Horizontal Pod Autoscaler configuration
hpa:
  # -- Enable Horizontal Pod Autoscaler
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 3
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 70
  # -- Target memory utilization percentage
  # targetMemoryUtilizationPercentage: 80

# -- Network Policy configuration
networkPolicy:
  # -- Enable Network Policy
  enabled: false
  # -- Allowed namespaces (list of label selectors or namespace names)
  allowedNamespaces: []
  # -- Allow egress to Kubernetes API server
  allowKubeAPI: false
  # -- Additional ingress rules
  additionalIngressRules: []
  # -- Additional egress rules
  additionalEgressRules: []

# -- ServiceMonitor configuration for Prometheus Operator
serviceMonitor:
  # -- Enable ServiceMonitor
  enabled: false
  # -- ServiceMonitor namespace (defaults to release namespace)
  namespace: ""
  # -- Scrape interval
  interval: 30s
  # -- Scrape timeout
  scrapeTimeout: 10s
  # -- ServiceMonitor labels
  labels: {}
  # -- ServiceMonitor annotations
  annotations: {}

# -- Pod Monitor configuration for Prometheus Operator
podMonitor:
  # -- Enable PodMonitor
  enabled: false
  # -- PodMonitor namespace (defaults to release namespace)
  namespace: ""
  # -- Scrape interval
  interval: 30s
  # -- Scrape timeout
  scrapeTimeout: 10s
  # -- PodMonitor labels
  labels: {}
  # -- PodMonitor annotations
  annotations: {}

# -- Extra environment variables
extraEnv: []
# - name: EXTRA_VAR
#   value: "extra-value"

# -- Extra environment variables from secrets or configmaps
extraEnvFrom: []
# - secretRef:
#     name: my-secret
# - configMapRef:
#     name: my-configmap

# -- Extra volumes
extraVolumes: []
# - name: extra-volume
#   emptyDir: {}

# -- Extra volume mounts
extraVolumeMounts: []
# - name: extra-volume
#   mountPath: /extra-path

# -- Extra containers
extraContainers: []

# -- Init containers
initContainers: []

# -- Pod priority class name
priorityClassName: ""

# -- Runtime class name
runtimeClassName: ""

# -- DNS policy
dnsPolicy: ClusterFirst

# -- DNS config
dnsConfig: {}

# -- Host network
hostNetwork: false

# -- Host PID
hostPID: false

# -- Host IPC
hostIPC: false

# -- Share process namespace
shareProcessNamespace: false

# -- Termination grace period seconds
terminationGracePeriodSeconds: 30
